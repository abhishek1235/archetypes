(function(f,g){var e=f.bdom.getNamespace("http://backbase.com/2013/portalView").getClass("backbaseWidget");e.prototype.createDisplay=function(b){this._displayed=this._displayed||b;if(bd.designMode||this._displayed||"LauncherContainer"!==this.parentNode.tagName||"2"!==this.getPreference("area")&&"3"!==this.getPreference("area")||!(-1<this.getPreference("widgetChrome").indexOf("chrome-tab")))this._displayed=!0,this.constructor.superClass.prototype.createDisplay.call(this)};e.prototype.getPreferenceFromParents=
function(b){var a=function(c,d){var b;d.getPreference&&"application"!==d.tagName&&(b=d.getPreference(c),!b&&d.parentNode&&(b=a(c,d.parentNode)));return b};return a(b,this)};window.lp=window.lp||{};window.lp.portalExtensions=[];window.lp.portalExtensions.push(function(){f.mixin(e,{handlers:{"preferences-form":function(b){for(var a=f.portal.portalModel.filterPreferences(b.detail.context.model.preferences.array),c=0;c<a.length;c++)"widgetChrome"!==a[c].name||a[c].inputType.options&&0!==a[c].inputType.options.length||
(a[c].inputType.name="select-one",a[c].inputType.options=bd.uiEditingOptions&&bd.uiEditingOptions.widgetPreferenceSelections?bd.uiEditingOptions.widgetPreferenceSelections.widgetChrome:[]);b.detail.customPrefsModel=a}}})})})(b$,jQuery);/*
 Backbase B.V, 2013
 @exports requireWidget

 @example
 &lt;body g:onload="requireWidget(__WIDGET__, 'my-module')"&gt;

 @param {Object} localConfig Require JS config containing paths or shims to add to the global requirejs context before loading
                  this widget (Optional)
 @param {Object} widgetInstance The widget (__WIDGET__) instance
 @apram {String} module The name of the widget module to load
*/
(function(f,g,e){var b=function(a){if(null===a||"object"!==typeof a)return a;var c=a.constructor(),f;for(f in a)a.hasOwnProperty(f)&&(c[f]=b(a[f]));return c},a=function(a,b){if(null===a||null===b)return a;for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a},c=function(c,f,t){var h=b(g.s.contexts._.config),q=f.myDefinition.sUrl.replace(/[^\/]*$/,""),q=q.replace(RegExp("^"+h.baseUrl),"");t=q+t;h.shim=a(h.shim,c.shim);h.paths=a(h.paths,c.paths);e.config(h)([t],function(a){"function"===typeof a&&
a.call(null,f)})};f.requireWidget=function(){var a=Array.prototype.slice.call(arguments,0);a[0].shim&&!a[1].paths||a.unshift({});c.apply(null,a)}})(window,requirejs,require);define("launchpad/pages/launchpad-page/modules/server-client-push",["launchpad/lib/common/util","launchpad/support/atmosphere/atmosphere"],function(f,g){function e(a){window.console&&window.console.log(a)}var b=function(){var a=this;a.registeredRequests=[];a.socket=g;a.transportProtocols={websocket:"websocket",polling:"polling",longPolling:"long-polling",streaming:"streaming",jsonp:"jsonp",sse:"sse"};a.atmoFunctions={onOpen:function(a){e("Opening server push connection using "+a.request.transport)},
onClose:function(){e("Server push connection closed.")},onClientTimeout:function(b){e("Server push connection timed out. Reconnecting in "+b.reconnectInterval);setTimeout(function(){a.socket.subscribe(b)},b.reconnectInterval)},onError:function(a){window.console&&window.console.warn&&window.console.warn("Problem with server push connection - "+a.status)},onTransportFailure:function(a){window.console&&window.console.warn&&window.console.warn("Server push has failed with the chosen transport method")}}};
b.prototype.registerNewRequest=function(a){a=this.socket.subscribe(a);this.registeredRequests.push(a)};b.prototype.createNewRequest=function(a){return{url:f.getContextPath()+a.url,contentType:a.contentType||"application/json",logLevel:a.logLevel||"info",transport:a.transport||this.transportProtocols.websocket,fallbackTransport:a.fallbackTransport||this.transportProtocols.longPolling,trackMessageLength:!0,reconnectInterval:0,enableXDR:a.enableXDR||!1,timeout:a.timeout||3E5,onMessage:a.onMessage,onOpen:a.onOpen||
this.atmoFunctions.onOpen,onClientTimeout:a.onClientTimeout||this.atmoFunctions.onClientTimeout,onError:a.onError||this.atmoFunctions.onError,onTransportFailure:a.onTransportFailure||this.atmoFunctions.onTransportFailure,onClose:a.onClose||this.atmoFunctions.onClose}};b.prototype.createAndRegisterNewRequest=function(a,b,d){d=d?d:{};d.url=a;d.onMessage=b;a=this.createNewRequest(d);this.registerNewRequest(a)};b.prototype.clearRegisteredRequests=function(){this.registeredRequests=[]};b.prototype.publishServerMessage=
function(a,b){for(var d=0;d<this.registeredRequests.length;d++)if(this.registeredRequests[d].request.url===f.getContextPath()+a)this.registeredRequests[d].request.onMessage(b)};b.prototype.init=function(a,b){if("null"!==window.b$.portal.loggedInUserId){var d=b$.portal.portalView.getElementsByTagName("page")[0];f.parseBoolean(d.getPreference("enableServerPush"))&&this.createAndRegisterNewRequest(a,function(a){a.responseBody&&(a=JSON.parse(a.responseBody),gadgets.pubsub.publish("launchpad-retail:"+
a.event,{},!0))},b)}};return{getInstance:function(){return new b}}});define("launchpad/pages/launchpad-page/modules/session-timeout",["jquery","launchpad/lib/common/util"],function(f,g){var e=function(){};e.prototype.handleSessionTimeout=function(b){var a=this,c=function(a){window.console&&window.console.log(a)},d=window.b$.portal.config.serverRoot,e=b.sessionEndpoint||d+"/services/rest/authentication/session",g=b.sessionValidateEndpoint||d+"/services/rest/authentication/session/validate",h=b.startCountdownAt||6E4,q=b.sessionCheckInterval||3E4,r=b.logoutUrl||d+"/j_spring_security_logout?portalName\x3d"+
window.b$.portal.portalName,l=!1,m=!1,k=0,x=function(){return f.ajax({url:g,type:"GET",timeout:2E3,cache:!1})},y=function(){return f.ajax({url:e,type:"PUT",timeout:2E3,cache:!1})},w=function(b){a.publishMessage("launchpad.add-notification",{notification:{id:"session-timeout",level:"WARNING",timeLeft:b,message:"Session is about to expire. "+b+" seconds remaining.",closable:!1,links:[{rel:"/timeout/continue",uri:window.location.hash||"#"}]}});b=1<=b?b-1:0;1>=b&&u();return b},n,z=function(a){c("Starting session timeout countdown.");
var b=a/1E3;n||(b=w(b),n=window.setInterval(function(){b=w(b)},1E3),p())},s=function(b,d){b?(c("Reconfirming session"),u(!0)):(n&&(c("Cancelling session timeout countdown."),window.clearInterval(n),a.publishMessage("launchpad.remove-notification",{notification:{id:"session-timeout"}}),n=null),d||p())},v=!1,u=function(b){v||(v=!0,b=(b?y:x)(m),b.done(function(b){l=!0;3<=k&&a.publishMessage("launchpad.remove-notification",{notification:{id:"offline-warning"}});k=0;c("Pinging session. "+b.remainingTime+
" seconds remain.");b=1E3*b.remainingTime;b>h?s():z(b)}),b.fail(function(b){l&&401===b.status?(c("Session has expired. Logging out..."),window.sessionStorage.setItem("launchpad.sessionExpired","true"),s(!1,!0),window.location.href=r):0===b.status&&"timeout"===b.statusText?(k++,c(k+" consecutive timeouts have occurred when attempting to validate the session"),3>k?(s(!1,!0),p(1E3)):(a.publishMessage("launchpad.add-notification",{notification:{id:"offline-warning",level:"WARNING",message:"Experiencing connectivity problems. Please check your internet connection",
closable:!1}}),p())):401!==b.status&&(c("Unknown error Problem validating session: "+b.statusText),p())}),b.always(function(){v=!1}))};f(document).on("click.lpTimeout keypress.lpTimeout",function(){m=!0;n&&s(!0)});var p=function(a){a=a||q;m=!1;window.setTimeout(function(){u(m)},a)};p()};e.prototype.notifyAfterTimeout=function(){var b=this;window.sessionStorage.getItem("launchpad.sessionExpired")&&(window.setTimeout(function(){b.publishMessage("launchpad.add-notification",{notification:{id:"session-expired",
level:"INFO",message:"Your session has expired. Please login again.",closable:!0}})},5E3),window.sessionStorage.removeItem("launchpad.sessionExpired"))};e.prototype.publishMessage=function(b,a){window.gadgets.pubsub.publish(b,a)};e.prototype.initializeSessionTimeoutHandling=function(){var b=window.b$.portal.portalView.getElementsByTagName("page")[0];g.parseBoolean(b.getPreference("enableTimeout"))&&(this.handleSessionTimeout({sessionEndpoint:b.getPreference("sessionEndpoint"),sessionValidateEndpoint:b.getPreference("sessionValidateEndpoint"),
logoutUrl:b.getPreference("logoutUrl"),startCountdownAt:b.getPreference("startCountdownAt"),sessionCheckInterval:b.getPreference("sessionCheckInterval")}),this.notifyAfterTimeout())};return{getInstance:function(){return new e}}});define("launchpad/pages/launchpad-page/modules/skip-links",["jquery","launchpad/lib/common/util"],function(f,g){var e=function(){var b=this,a=window.b$,c=window.lp.util;e.prototype.createSkipLinks=function(){var b=a.portal.portalView.all,c=f('\x3cdiv id\x3d"skip-link" class\x3d"skip-link"\x3e\x3c/div\x3e'),e=function(a,b,d){a||(a=d.attr("id"),a||(a=d.attr("data-pid")+"-"+ +new Date,d.attr("id",a)));b=f('\x3ca class\x3d"sr-only" href\x3d"#'+a+'"\x3e'+b+"\x3c/a\x3e");if(-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var e=
f("#"+a),g=!0;b.on("click",function(){var a=e.attr("tabindex");(g="undefined"!==typeof a&&!1!==a)||e.attr("tabindex","-1");e.focus()});e.on("blur",function(){g||e.removeAttr("tabindex")})}c.prepend(b)};f("body").prepend(c);for(var h in b)if(b.hasOwnProperty(h))for(var g=b[h],r=g.attributes,l=0,m=r.length;l<m;l++){var k=r[l];if("skipLink"===k.name){k.value&&e(g.id,k.value,f(g.htmlNode));break}}};e.prototype.initializeSkipLinks=function(){var d=a.portal.portalView.getElementsByTagName("page")[0];c.parseBoolean(d.getPreference("enableSkipLinks"))&&
b.createSkipLinks()}};return new e});
//@ sourceMappingURL=launchpad-page.js.map