define("launchpad/lib/user/user-module",["angular","jquery","launchpad/lib/common/util"],function(d,h,e){var c=d.module("user",[]);c.constant("loginStorageConfig",{userId:"launchpad.userId",userData:"launchpad.userData"});c.constant("loginConfig",{loginUrl:e.getServicesPath()+"/j_spring_security_check",logoutUrl:e.getServicesPath()+"/j_spring_security_logout?portalName\x3d"+window.b$.portal.portalName,successPage:null});c.service("LoginService",["$http","$window","loginConfig","loginStorageConfig",
function(b,a,c,k){var f=this,g=d.copy(c);this.configure=function(a){d.extend(g,a)};this.doLogin=function(a,b){return this.getLoginPromise(a,b).success(function(a){f.error=null;f.handleSuccessfulLogin(a)}).error(function(a){f.error=a.errors[0].code})};this.getLoginPromise=function(a,c){var d={j_username:a,j_password:c,portal_name:window.b$.portal.getCurrentPortal().name,page_name:window.b$.portal.getCurrentPage().name};return b.post(g.loginUrl+"?rd\x3d"+(new Date).getTime(),h.param(d),{headers:{Accept:"application/json",
"Content-Type":"application/x-www-form-urlencoded;"}})};this.handleSuccessfulLogin=function(b){0===a.location.protocol.indexOf("file:")&&(b.successView=null);b.successView?a.location.replace(e.getContextPath()+b.successView):(b=0===a.location.protocol.indexOf("file:")?a.location.pathname.split("//")[0]+a.location.search+a.location.hash:a.location.href,a.location.replace(b))};this.doLogout=function(){a.sessionStorage.clear();a.location.href=g.logoutUrl};this.getStoredData=function(){return a.sessionStorage.getItem(k.userData)}}]);
c.directive("profileImage",function(){return{restrict:"EA",replace:!0,template:'\x3cimg height\x3d"{{size}}" width\x3d"{{size}}" ng-src\x3d"{{dataUrl}}"" /\x3e',scope:{fullname:"@",color:"@",size:"\x3d"},link:function(b,a,c){b.$watch("size + fullname + color",function(){b.dataUrl=e.getDefaultProfileImage(b.fullname,b.size||100,b.size||100,b.color)})}}})});define(["launchpad/lib/user/user-module"],function(d){return d});
//# sourceMappingURL=user.js.map